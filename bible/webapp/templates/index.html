<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 말씀 - 성경 NFC 키링</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✝️</text></svg>">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>✝ 오늘의 말씀 ✝</h1>
            <div class="date">{{ today }}</div>
        </div>

        {% if verse %}
        <div style="text-align: center;">
            <span class="category-tag">{{ verse.category }}</span>
        </div>

        <div class="verse-section">
            <div class="verse-reference">
                {{ verse.reference }}
            </div>

            <div class="verse-content">
                {{ verse.content }}
            </div>

            {% if verse.description %}
            <div class="description">
                "{{ verse.description }}"
            </div>
            {% endif %}
        </div>

        <div class="cross-decoration">✝</div>

        <div class="button-group">
            <a href="/random" class="btn">다른 말씀 보기</a>
            <button onclick="shareVerse()" class="btn">말씀 공유하기</button>
        </div>

        <div class="category-grid">
            <a href="/category/위로" class="category-card">위로</a>
            <a href="/category/감사" class="category-card">감사</a>
            <a href="/category/평안" class="category-card">평안</a>
            <a href="/category/믿음" class="category-card">믿음</a>
            <a href="/category/소망" class="category-card">소망</a>
            <a href="/category/사랑" class="category-card">사랑</a>
            <a href="/category/축복" class="category-card">축복</a>
        </div>

        {% else %}
        <div class="error-message">
            말씀을 불러올 수 없습니다.
        </div>
        {% endif %}

        <div class="footer">
            하나님의 말씀은 살아있고 활력이 있어<br>
            좌우에 날선 어떤 검보다도 예리하다<br>
            - 히브리서 4:12 -
        </div>
    </div>

    <script>
        function shareVerse() {
            const verse = {
                reference: "{{ verse.reference }}",
                content: "{{ verse.content }}"
            };

            const text = `${verse.reference}\n\n${verse.content}\n\n🙏 오늘의 말씀`;

            if (navigator.share) {
                navigator.share({
                    title: '오늘의 말씀',
                    text: text
                }).catch((error) => console.log('공유 취소됨'));
            } else {
                // 복사 기능 폴백
                navigator.clipboard.writeText(text).then(() => {
                    alert('말씀이 복사되었습니다!\n카카오톡이나 문자로 공유해보세요 💕');
                });
            }
        }

        // 페이지 로드 시 새로고침 버튼 추가
        document.addEventListener('DOMContentLoaded', function() {
            console.log('오늘의 말씀이 로드되었습니다.');
        });
    </script>
</body>
</html>
